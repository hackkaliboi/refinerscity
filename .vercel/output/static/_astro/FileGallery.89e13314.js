import{l as N,j as r,g as m,d as b}from"./supabase.52e742a7.js";import{r as a}from"./index.b2a7ed32.js";function F(){const[l,d]=a.useState([]),[p,h]=a.useState(!0),[o,x]=a.useState("created_at"),[n,u]=a.useState("desc"),[c,g]=a.useState("");a.useEffect(()=>{y()},[o,n,c]);const y=async()=>{try{const{data:e,error:s}=await N("media",{sortBy:o,order:n,search:c});if(s)throw s;d(e||[])}catch(e){console.error("Error loading files:",e)}finally{h(!1)}},f=async(e,s)=>{if(confirm("Are you sure you want to delete this file?"))try{const{error:t}=await b("media",s);if(t)throw t;d(l.filter(i=>i.id!==e))}catch(t){console.error("Error deleting file:",t)}},j=e=>{const s=["B","KB","MB","GB"];let t=e,i=0;for(;t>=1024&&i<s.length-1;)t/=1024,i++;return`${t.toFixed(1)} ${s[i]}`},v=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return p?r.jsx("div",{className:"flex justify-center p-8",children:"Loading..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("input",{type:"text",placeholder:"Search files...",value:c,onChange:e=>g(e.target.value),className:"flex-1 px-4 py-2 rounded-lg border border-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-500"}),r.jsxs("select",{value:o,onChange:e=>x(e.target.value),className:"px-4 py-2 rounded-lg border border-primary-200 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"created_at",children:"Date"}),r.jsx("option",{value:"size",children:"Size"}),r.jsx("option",{value:"name",children:"Name"})]}),r.jsx("button",{onClick:()=>u(e=>e==="asc"?"desc":"asc"),className:"px-4 py-2 rounded-lg bg-primary-100 text-primary-700 hover:bg-primary-200",children:n==="asc"?"↑":"↓"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(e=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"aspect-w-16 aspect-h-9 bg-primary-50",children:e.mime_type.startsWith("image/")?r.jsx("img",{src:m("media",e.path),alt:e.title||e.path,className:"object-cover w-full h-full"}):r.jsx("div",{className:"flex items-center justify-center",children:r.jsx("span",{className:"text-primary-400",children:e.mime_type.split("/")[1].toUpperCase()})})}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"font-medium text-primary-900 truncate",children:e.title||e.path.split("/").pop()}),r.jsxs("div",{className:"mt-1 text-sm text-primary-500",children:[r.jsx("p",{children:j(e.size)}),r.jsx("p",{children:v(e.created_at)})]}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("a",{href:m("media",e.path),target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 text-sm rounded-md bg-primary-100 text-primary-700 hover:bg-primary-200",children:"View"}),r.jsx("button",{onClick:()=>f(e.id,e.path),className:"px-3 py-1 text-sm rounded-md bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})]})]})]},e.id))}),l.length===0&&r.jsx("div",{className:"text-center py-12 text-primary-500",children:"No files found. Upload some files to get started!"})]})}export{F as FileGallery};
